
	<!DOCTYPE html>
	<html>
		<head>
			<meta charset="utf-8">
			<title>tests/specs/unit/JedisManagerTest.cfc</title>

			<link rel="stylesheet" href="../../../assets/css/syntaxhighlighter.css">
			<link rel="stylesheet" href="../../../assets/css/main.css">
			<script src="../../../assets/js/jquery-3.3.1.min.js"></script>
			<script src="../../../assets/js/popper.min.js"></script>
			<script src="../../../assets/js/bootstrap.min.js"></script>
			<script src="../../../assets/js/stupidtable.min.js"></script>
			<script src="../../../assets/js/syntaxhighlighter.js"></script>
			<script src="../../../assets/js/fontawesome.js"></script>
			
			<script>
				$( document ).ready( function(){
					var lineNumbersBGColorsJSON = {"88":"danger","46":"danger","49":"danger","91":"danger","94":"danger","51":"danger","97":"danger","54":"danger","11":"danger","99":"danger","12":"danger","13":"danger","57":"danger","14":"danger","15":"danger","16":"danger","17":"danger","18":"danger","1":"danger","8":"danger","9":"danger","60":"danger","62":"danger","65":"danger","21":"danger","22":"danger","68":"danger","27":"danger","28":"danger","29":"danger","71":"danger","73":"danger","74":"danger","75":"danger","32":"danger","33":"danger","78":"danger","36":"danger","38":"danger","39":"danger","102":"danger","105":"danger","81":"danger","40":"danger","84":"danger","86":"danger","43":"danger","87":"danger"};
					$.each( lineNumbersBGColorsJSON, function( key, value ) {
						$( `td.gutter > div.line.number${key}` ).addClass( `text-light bg-${value}` );
					});
				});
			</script>

		</head>
		<body>
			<div class="container-fluid my-3">
				<table class="table-borderless mx-auto">
					<thead>
						<tr>
							<th class="h2 text-right pr-3">
								tests/specs/unit/JedisManagerTest.cfc
							</th>
							<th style="width: 300px">
								<div class="progress position-relative" style="line-height: 2.5rem;font-size: 1.5rem; height:40px;">
									<div class="progress-bar bg-danger" role="progressbar" style="width: 0.0%" aria-valuenow="0.0" aria-valuemin="0" aria-valuemax="100"></div>
									<div class="progress-bar bg-secondary" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
									<span class="justify-content-center text-light d-flex position-absolute w-100">0.0% coverage</span>
								</div>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<a href="javascript:history.back()"><button type="button" class="btn btn-secondary btn-sm my-1"><i class="fas fa-angle-double-left"></i> Back</button></a>
							</td>
							<td>
								&nbsp;
							</td>
						</tr>
					</tbody>
				</table>
				<hr width="100%">

<script type="text/syntaxhighlighter" class="brush: javascript"><![CDATA[

component
    extends="coldbox.system.testing.BaseModelTest"
{

    /*********************************** LIFE CYCLE Methods ***********************************/

    function beforeAll() {
        super.beforeAll();
        // setup
		model = createMock( "JedisManager");
		model.$("loadSettings");
		model.$property( "jedisServerPort", "variables", "6379" );
		model.$property( "jedisServerName", "variables", "localhost" );
		model.$property( "jedisMaxTotalpool", "variables", 100 );
		model.$property( "jedisMaxIdlePool", "variables", 10 );
		model.$property( "cacheDurationInSeconds", "variables", 20 );
		model.init();
    }

    function afterAll() {
        super.afterAll();
    }

    /*********************************** BDD SUITES ***********************************/

    function run() {
        describe( "JedisManager suite", function() {
            beforeEach( function( currentSpec ) {
            } );

            it( "Can be created", function() {
                expect( model ).toBeComponent();
            } );

			it( "set and get value", function() {
                // Arrange
				var key   = "testKey";
				var value = "testValue";
				model.cacheInsert(key, value,10);

				// Act
				var retrievedValue = model.cacheGet(key);

				// Assert
				assertEquals(value, retrievedValue, "getValue should return the expected value");
            } );

			it( "cacheGet - should return null for a non-existent key", function() {
                // Arrange
				var key = "testKeyNew";

				// Act
				var nonExistentValue = model.cacheGet(key);

				// Assert
				expect(isDefined("nonExistentValue")).toBeFalse("The var 'nonExistentValue' should not be defined");
            } );

			it( "cacheExists - should return false for a non-existent key", function() {
                // Arrange
				var key = "testKeyNew";

				// Act
				var nonExistentKey = model.cacheExists(key);

				// Assert
				expect(nonExistentKey).toBeFalse();
            } );

			it( "cacheExists - should return true for existing key", function() {
                // Arrange
				var key   = "testKey";
				var value = "testValue";
				model.cacheInsert(key, value,10);

				// Act
				var existsKey = model.cacheExists(key);

				// Assert
				expect(existsKey).toBeTrue();
            } );

			it( "cacheClear - should clear existing key and return 1", function() {
                // Arrange
				var key   = "testKey";
				var value = "testValue";
				model.cacheInsert(key, value,10);

				// Act
				var clearKey = model.cacheClear(key);

				// Assert
				expect(clearKey).toBe(1);
            } );

			it( "cacheClear - should return 0 for a non-existent key", function() {
                // Arrange
				var key   = "testKeyNew";

				// Act
				var clearKey = model.cacheClear(key);

				// Assert
				expect(clearKey).toBe(0);
            } );

		} );
	}

}

]]></script>
		</div>
	</body>
</html>
